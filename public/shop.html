<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnaDailyCheker | Shop</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/seasonal-themes.css">
    <script src="js/seasonal-manager.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (max-width: 600px) {
            .shop-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .cart-float {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
            }
        }

        .product-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-price {
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--secondary);
            margin: 0.5rem 0;
        }

        .cart-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary);
            color: white;
            padding: 1rem;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 100;
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e53e3e;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <!-- Ocean Theme Background -->
    <div class="ocean-background">
        <div class="bubble x1"></div>
        <div class="bubble x2"></div>
        <div class="bubble x3"></div>
        <div class="bubble x4"></div>
        <div class="bubble x5"></div>
    </div>

    <nav class="navbar" style="position: absolute; top: 0; width: 100%; border: none;">
        <div class="container nav-container">
            <a href="index.html" class="text-gradient"
                style="font-size: 1.5rem; font-weight: 800; text-decoration: none; letter-spacing: -1px;">SnaDaily<span
                    style="color: white; font-weight: 300;">Checker</span></a>

            <button class="hamburger-btn" onclick="toggleMenu()">
                <i class="ri-menu-4-line"></i>
            </button>
        </div>
    </nav>

    <!-- Nav Overlay -->
    <div class="nav-overlay-backdrop" id="navBackdrop" onclick="toggleMenu()"></div>
    <div class="nav-overlay" id="navOverlay">
        <div class="nav-menu-header">
            <span class="text-gradient" style="font-weight: 800; font-size: 1.25rem;">MENU</span>
            <button class="hamburger-btn" onclick="toggleMenu()" style="font-size: 1.25rem;">
                <i class="ri-close-line"></i>
            </button>
        </div>
        <div class="nav-menu-links">
            <a href="index.html" class="nav-menu-link">
                <i class="ri-home-4-line"></i> Beranda
            </a>
            <a href="events.html" class="nav-menu-link">
                <i class="ri-calendar-event-line"></i> Event Kontes
            </a>
            <a href="track.html" class="nav-menu-link">
                <i class="ri-truck-line"></i> Lacak Pesanan
            </a>
            <a href="shop.html" class="nav-menu-link active">
                <i class="ri-shopping-cart-line"></i> Toko Premium
            </a>
            <div id="userMenuLinks"></div>
        </div>
    </div>

    <div class="container" style="padding-top: 100px; padding-bottom: 50px;">
        <div id="productGrid" class="shop-grid">
            <!-- Products will be loaded here -->
            <div style="grid-column: 1/-1; text-align: center; color: white;">Loading products...</div>
        </div>
    </div>

    <!-- Floating Cart -->
    <div class="cart-float" onclick="alert('Keranjang belanja akan segera hadir!')">
        <i class="ri-shopping-cart-2-line" style="font-size: 1.5rem;"></i>
        <span class="cart-badge" id="cartCount">0</span>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1000; align-items: start; justify-content: center; backdrop-filter: blur(10px); overflow-y: auto; padding: 2rem 0;">
        <div class="glass-panel animate-reveal"
            style="max-width: 600px; width: 95%; padding: 2.5rem; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); position: relative; margin-bottom: 2rem;">
            <button onclick="document.getElementById('checkoutModal').style.display='none'"
                style="position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>

            <h2 style="color: white; margin-bottom: 0.5rem; font-size: 1.8rem;">Checkout Pesanan</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">Silakan lengkapi data pengiriman anda.</p>

            <form id="checkoutForm" onsubmit="event.preventDefault(); proceedToPayment();">
                <div class="checkout-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="input-group">
                        <label class="input-label">Nama Lengkap</label>
                        <input type="text" id="custName" class="glass-input" placeholder="Masukkan nama" required>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Nomor WhatsApp / HP</label>
                        <input type="tel" id="custPhone" class="glass-input" placeholder="0812xxxx" required>
                    </div>
                </div>

                <style>
                    @media (max-width: 480px) {
                        .checkout-grid {
                            grid-template-columns: 1fr !important;
                        }
                    }
                </style>

                <div class="input-group">
                    <label class="input-label">Email (Gmail)</label>
                    <input type="email" id="custEmail" class="glass-input" placeholder="nama@gmail.com" required>
                </div>

                <div class="input-group" style="position: relative;">
                    <label class="input-label">Cari Lokasi (Kota / Kecamatan)</label>
                    <div style="position: relative;">
                        <input type="text" id="locSearch" class="glass-input"
                            placeholder="Ketik nama kota atau kecamatan..." autocomplete="off"
                            oninput="searchLocation(this.value)">
                        <i class="ri-search-line"
                            style="position: absolute; right: 15px; top: 15px; color: var(--text-muted);"></i>
                    </div>
                    <div id="locResults"
                        style="display: none; position: absolute; top: 100%; left: 0; width: 100%; background: #1a202c; border: 1px solid #2d3748; border-radius: 8px; z-index: 100; max-height: 200px; overflow-y: auto; margin-top: 5px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.5);">
                        <!-- Results will appear here -->
                    </div>
                    <!-- Hidden fields to store selected location info -->
                    <input type="hidden" id="destId">
                    <input type="hidden" id="custProv">
                    <input type="hidden" id="custCity">
                    <input type="hidden" id="custDistrict">
                </div>

                <div class="input-group">
                    <label class="input-label">Alamat Lengkap (Jalan, No Rumah, RT/RW)</label>
                    <input type="text" id="custAddress" class="glass-input" placeholder="Jl. Nama Jalan No. XX"
                        required>
                </div>

                <div class="input-group">
                    <label class="input-label">Kode Pos</label>
                    <input type="text" id="custZip" class="glass-input" placeholder="XXXXX" required>
                </div>

                <hr style="border: none; border-top: 1px solid rgba(255,255,255,0.1); margin: 1.5rem 0;">

                <div id="shippingSelection" style="display: none;">
                    <label class="input-label">Pilih Layanan Pengiriman</label>
                    <div id="shippingOptions" style="display: grid; gap: 10px;">
                        <!-- Options will be populated here -->
                    </div>
                </div>
                <input type="hidden" id="shipCourier">
                <input type="hidden" id="shipService">

                <!-- Price Summary -->
                <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Harga Produk:</span>
                        <span id="priceProduct">Rp 0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span title="Biaya box styrofoam & oksigen">Biaya Packing (Wajib):</span>
                        <span>Rp 10.000</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 0.8rem; padding-bottom: 0.8rem; border-bottom: 1px dashed rgba(255,255,255,0.2);">
                        <span>Ongkos Kirim:</span>
                        <span id="priceShipping">Rp 0</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem; color: var(--secondary);">
                        <span>Total Bayar:</span>
                        <span id="priceTotal">Rp 0</span>
                    </div>
                </div>

                <button type="submit" class="btn-primary"
                    style="width: 100%; margin-top: 2rem; justify-content: center; height: 55px; font-size: 1.1rem;">
                    <i class="ri-secure-payment-line" style="margin-right: 10px;"></i> Bayar Sekarang (QRIS/Transfer)
                </button>
            </form>
        </div>
    </div>

    <!-- Midtrans Snap will handle the payment popup -->

    <script src="https://app.midtrans.com/snap/snap.js" data-client-key="Mid-client-uo-CK2QCzX1PeMmB"></script>
    <script src="js/navigation.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.loadProducts) {
                window.loadProducts();
            }
        });
    </script>
</body>

</html>